# Catholic Catechesis Lesson Plan Integration Plan
## DaisyDog Educational Content Database

---

## üéØ Project Overview

**Goal**: Create a comprehensive, searchable database of Catholic catechesis lesson plans integrated into DaisyDog, hosted on Replit with full source attribution.

**Scope**: 
- Scrape and structure 100+ lesson plans from 5 major Catholic education sources
- Build Replit database with PostgreSQL/SQLite
- Create API endpoints for DaisyDog to access lessons
- Maintain copyright compliance and source attribution

---

## üìä Phase 1: Research & Database Design (Week 1)

### 1.1 Content Source Analysis

**Primary Sources to Scan:**

| Source | URL Pattern | Content Type | Age Range | License Status |
|--------|-------------|--------------|-----------|----------------|
| CGS USA | cgsusa.org | PDF Templates | 3-12 years | Educational Use |
| Catholic Resources | catholicresources.education | Structured Lessons | K-12 | Check Terms |
| The Religion Teacher | thereligionteacher.com | Blog Posts | Elementary-HS | Attribution Required |
| Catholic Blogger | catholicblogger1.blogspot.com | Lesson Links | PreK-Grade 6 | Public Blog |
| Catholic Mom | catholicmom.com | Worksheets/Activities | All Ages | Check Terms |

### 1.2 Database Schema Design

```sql
-- Replit PostgreSQL Schema

-- Main Lessons Table
CREATE TABLE catechesis_lessons (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    topic VARCHAR(100) NOT NULL,
    subtopic VARCHAR(100),
    age_group VARCHAR(50), -- 'PreK-K', '1-3', '4-6', '7-9', '10-12'
    liturgical_season VARCHAR(50), -- 'Advent', 'Christmas', 'Lent', 'Easter', 'Ordinary Time'
    lesson_type VARCHAR(50), -- 'Bible Story', 'Sacrament', 'Prayer', 'Saints', 'Liturgy'
    duration_minutes INT,
    materials_needed TEXT[],
    objectives TEXT[],
    lesson_content TEXT NOT NULL,
    activities JSONB, -- Structured activity data
    assessment_ideas TEXT[],
    source_name VARCHAR(100) NOT NULL,
    source_url TEXT NOT NULL,
    source_type VARCHAR(50), -- 'PDF', 'Blog Post', 'Worksheet', 'Template'
    scraped_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    copyright_notice TEXT,
    daisy_adaptations JSONB, -- DaisyDog-specific enhancements
    tags TEXT[]
);

-- CGS-Specific Extensions
CREATE TABLE cgs_presentations (
    id SERIAL PRIMARY KEY,
    lesson_id INT REFERENCES catechesis_lessons(id),
    cgs_level VARCHAR(20), -- 'Level 1 (3-6)', 'Level 2 (6-9)', 'Level 3 (9-12)'
    presentation_name VARCHAR(255),
    materials_list TEXT[],
    preparation_notes TEXT,
    presentation_steps JSONB,
    wondering_questions TEXT[],
    response_activities JSONB
);

-- Sacrament-Specific Table
CREATE TABLE sacrament_lessons (
    id SERIAL PRIMARY KEY,
    lesson_id INT REFERENCES catechesis_lessons(id),
    sacrament_name VARCHAR(50), -- 'Baptism', 'Eucharist', 'Confirmation', etc.
    preparation_level VARCHAR(50), -- 'First Communion Prep', 'Confirmation Prep'
    scriptural_basis TEXT[],
    catechism_references TEXT[]
);

-- Saints and Feast Days
CREATE TABLE saints_lessons (
    id SERIAL PRIMARY KEY,
    lesson_id INT REFERENCES catechesis_lessons(id),
    saint_name VARCHAR(100),
    feast_day DATE,
    patronage TEXT[],
    key_virtues TEXT[]
);

-- Prayer Lessons
CREATE TABLE prayer_lessons (
    id SERIAL PRIMARY KEY,
    lesson_id INT REFERENCES catechesis_lessons(id),
    prayer_name VARCHAR(100),
    prayer_text TEXT,
    prayer_type VARCHAR(50), -- 'Traditional', 'Meditation', 'Litany', 'Rosary'
    age_appropriate_explanation TEXT
);

-- Liturgical Calendar Integration
CREATE TABLE liturgical_calendar (
    id SERIAL PRIMARY KEY,
    date DATE NOT NULL,
    liturgical_season VARCHAR(50),
    feast_or_memorial VARCHAR(255),
    color VARCHAR(20),
    readings JSONB,
    related_lessons INT[] -- Array of lesson_id references
);

-- DaisyDog AI Enhancements
CREATE TABLE daisy_lesson_adaptations (
    id SERIAL PRIMARY KEY,
    lesson_id INT REFERENCES catechesis_lessons(id),
    daisy_introduction TEXT, -- Daisy's friendly intro to the lesson
    interactive_prompts TEXT[], -- Conversation starters for AI
    game_suggestions JSONB, -- Links to DaisyDog games
    prayer_practice_guide TEXT,
    parent_talking_points TEXT[]
);

-- Usage Analytics (COPPA-compliant)
CREATE TABLE lesson_usage_stats (
    id SERIAL PRIMARY KEY,
    lesson_id INT REFERENCES catechesis_lessons(id),
    usage_date DATE,
    age_group_used VARCHAR(50),
    completion_rate DECIMAL(3,2),
    parent_rating INT CHECK (parent_rating BETWEEN 1 AND 5),
    anonymous_feedback TEXT
);

-- Indexes for Performance
CREATE INDEX idx_lessons_topic ON catechesis_lessons(topic);
CREATE INDEX idx_lessons_age_group ON catechesis_lessons(age_group);
CREATE INDEX idx_lessons_liturgical_season ON catechesis_lessons(liturgical_season);
CREATE INDEX idx_lessons_tags ON catechesis_lessons USING GIN(tags);
CREATE INDEX idx_liturgical_calendar_date ON liturgical_calendar(date);
```

---

## üîç Phase 2: Content Scanning Strategy (Week 2)

### 2.1 Web Scraping Implementation

**Before I start coding, I need your input on:**

1. **Legal/Copyright Questions:**
   - Do you have permission/licenses for these educational resources?
   - Should I implement rate limiting to respect server resources?
   - Do you want to store full content or just summaries with links?

2. **Technical Preferences:**
   - Python scraping libraries: BeautifulSoup4, Scrapy, or Playwright?
   - Should I create a separate scraping service or integrate into main app?
   - Error handling: Skip problematic URLs or alert you?

3. **Content Processing:**
   - Should DaisyDog rewrite lessons in her voice automatically?
   - Do you want AI to generate age-appropriate adaptations?
   - Should I extract images/worksheets or just text content?

### 2.2 Proposed Scraping Architecture

```python
# scraping/lesson_scraper.py

import asyncio
import aiohttp
from bs4 import BeautifulSoup
from dataclasses import dataclass
from typing import List, Dict, Optional
import psycopg2
from datetime import datetime

@dataclass
class LessonPlan:
    title: str
    topic: str
    age_group: str
    content: str
    source_url: str
    source_name: str
    materials: List[str]
    objectives: List[str]
    activities: Dict
    
class CatholicLessonScraper:
    def __init__(self, db_conn_string: str):
        self.db_conn = psycopg2.connect(db_conn_string)
        self.scraped_count = 0
        self.failed_urls = []
        
    async def scrape_cgs_usa(self, pdf_url: str):
        """Scrape CGS USA PDF templates"""
        # Use PyPDF2 or pdfplumber to extract structured content
        pass
        
    async def scrape_catholic_resources(self, collection_id: str):
        """Scrape catholicresources.education collections"""
        base_url = f"https://catholicresources.education/#collection-{collection_id}"
        # Implementation with beautiful soup
        pass
        
    async def scrape_religion_teacher(self, lesson_slug: str):
        """Scrape thereligionteacher.com blog posts"""
        # Extract lesson content, maintain attribution
        pass
        
    async def scrape_catholic_blogger(self):
        """Scrape lesson plan links from catholicblogger1.blogspot.com"""
        # Follow links and extract content
        pass
        
    async def scrape_catholic_mom(self):
        """Scrape worksheets and activities from catholicmom.com"""
        # Extract worksheet content, download PDFs if permitted
        pass
        
    def store_lesson(self, lesson: LessonPlan):
        """Store scraped lesson in Replit database"""
        cursor = self.db_conn.cursor()
        cursor.execute("""
            INSERT INTO catechesis_lessons 
            (title, topic, age_group, lesson_content, source_name, source_url, scraped_date)
            VALUES (%s, %s, %s, %s, %s, %s, %s)
            RETURNING id
        """, (
            lesson.title,
            lesson.topic,
            lesson.age_group,
            lesson.content,
            lesson.source_name,
            lesson.source_url,
            datetime.now()
        ))
        lesson_id = cursor.fetchone()[0]
        self.db_conn.commit()
        return lesson_id
```

---

## ü§ñ Phase 3: AI Content Enhancement (Week 3)

### 3.1 DaisyDog Lesson Adaptation Service

```python
# services/daisy_lesson_adapter.py

from anthropic import Anthropic
import json

class DaisyLessonAdapter:
    def __init__(self, api_key: str):
        self.client = Anthropic(api_key=api_key)
        
    def adapt_for_daisy(self, lesson_content: str, age_group: str, topic: str):
        """Convert formal lesson plan into Daisy's friendly teaching style"""
        
        prompt = f"""
        You are Daisy, a friendly Cavalier King Charles Spaniel who teaches 
        Catholic faith to children. Adapt this lesson plan for {age_group} 
        about {topic} into your warm, engaging teaching style.
        
        Original Lesson:
        {lesson_content}
        
        Create:
        1. Daisy's Introduction (warm, enthusiastic greeting)
        2. Interactive Conversation Prompts (5-7 questions to engage children)
        3. Game Suggestion (link to DaisyDog game or activity)
        4. Prayer Practice Guide (age-appropriate prayer explanation)
        5. Parent Talking Points (3-5 discussion topics for families)
        
        Keep Daisy's personality: loving, patient, faithful, and FUN!
        Use simple language, Catholic terminology explained clearly,
        and lots of encouragement. Add *wags tail* and *happy bark* 
        when appropriate for Daisy's character.
        
        Return as JSON with keys: introduction, prompts, game_suggestion,
        prayer_guide, parent_points
        """
        
        response = self.client.messages.create(
            model="claude-sonnet-4-20250514",
            max_tokens=2000,
            messages=[{"role": "user", "content": prompt}]
        )
        
        return json.loads(response.content[0].text)
```

---

## üì± Phase 4: Replit Implementation (Week 4)

### 4.1 Replit Project Structure

```
daisydog-catechesis/
‚îú‚îÄ‚îÄ .replit                    # Replit configuration
‚îú‚îÄ‚îÄ replit.nix                 # Nix environment setup
‚îú‚îÄ‚îÄ main.py                    # FastAPI server entry point
‚îú‚îÄ‚îÄ requirements.txt           # Python dependencies
‚îú‚îÄ‚îÄ .env                       # Environment variables (API keys)
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ init_db.sql           # Database schema
‚îÇ   ‚îú‚îÄ‚îÄ seed_data.sql         # Sample lessons for testing
‚îÇ   ‚îî‚îÄ‚îÄ migrations/           # Database version control
‚îÇ
‚îú‚îÄ‚îÄ scraping/
‚îÇ   ‚îú‚îÄ‚îÄ lesson_scraper.py     # Main scraper class
‚îÇ   ‚îú‚îÄ‚îÄ cgs_parser.py         # CGS-specific PDF parser
‚îÇ   ‚îú‚îÄ‚îÄ blog_parser.py        # Blog post content extractor
‚îÇ   ‚îî‚îÄ‚îÄ rate_limiter.py       # Respectful scraping controls
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ daisy_adapter.py      # AI lesson adaptation
‚îÇ   ‚îú‚îÄ‚îÄ lesson_query.py       # Database query interface
‚îÇ   ‚îî‚îÄ‚îÄ calendar_service.py   # Liturgical calendar integration
‚îÇ
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ lessons.py            # Lesson CRUD endpoints
‚îÇ   ‚îú‚îÄ‚îÄ search.py             # Search and filter endpoints
‚îÇ   ‚îî‚îÄ‚îÄ daisy_chat.py         # AI teaching assistant endpoints
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ lesson.py             # Lesson data models
‚îÇ   ‚îú‚îÄ‚îÄ cgs_presentation.py   # CGS-specific models
‚îÇ   ‚îî‚îÄ‚îÄ calendar.py           # Liturgical calendar models
‚îÇ
‚îî‚îÄ‚îÄ frontend/                  # React/Vite interface (if needed)
    ‚îú‚îÄ‚îÄ src/
    ‚îÇ   ‚îú‚îÄ‚îÄ components/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LessonBrowser.tsx
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DaisyTeacher.tsx
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CalendarView.tsx
    ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx
    ‚îî‚îÄ‚îÄ package.json
```

### 4.2 Replit Database Setup

```python
# database/db_manager.py

import os
from replit import db as replit_db  # Replit's built-in database
import psycopg2
from contextlib import contextmanager

class ReplitDatabaseManager:
    def __init__(self):
        # Replit provides DATABASE_URL automatically
        self.db_url = os.environ.get('DATABASE_URL')
        
    @contextmanager
    def get_connection(self):
        conn = psycopg2.connect(self.db_url)
        try:
            yield conn
            conn.commit()
        except Exception as e:
            conn.rollback()
            raise e
        finally:
            conn.close()
            
    def initialize_database(self):
        """Run initial schema setup"""
        with self.get_connection() as conn:
            cursor = conn.cursor()
            with open('database/init_db.sql', 'r') as f:
                cursor.execute(f.read())
```

---

## üöÄ Phase 5: API Development (Week 5)

### 5.1 FastAPI Endpoints

```python
# main.py - FastAPI Server

from fastapi import FastAPI, Query, HTTPException
from fastapi.middleware.cors import CORSMiddleware
from typing import List, Optional
from pydantic import BaseModel
import os

app = FastAPI(title="DaisyDog Catechesis API")

# Enable CORS for React frontend
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
    allow_headers=["*"],
)

class LessonQuery(BaseModel):
    topic: Optional[str] = None
    age_group: Optional[str] = None
    liturgical_season: Optional[str] = None
    lesson_type: Optional[str] = None
    search_text: Optional[str] = None

class LessonResponse(BaseModel):
    id: int
    title: str
    topic: str
    age_group: str
    lesson_content: str
    source_url: str
    daisy_introduction: Optional[str]
    materials_needed: List[str]
    
@app.get("/api/lessons", response_model=List[LessonResponse])
async def search_lessons(
    topic: Optional[str] = None,
    age_group: Optional[str] = None,
    liturgical_season: Optional[str] = None,
    limit: int = Query(10, le=50)
):
    """Search lesson plans with filters"""
    # Implementation connects to database
    pass

@app.get("/api/lessons/{lesson_id}", response_model=LessonResponse)
async def get_lesson(lesson_id: int):
    """Get full lesson plan by ID"""
    pass

@app.get("/api/calendar/today")
async def get_todays_lessons():
    """Get lessons appropriate for today's liturgical calendar"""
    pass

@app.post("/api/daisy/adapt")
async def adapt_lesson_for_daisy(lesson_id: int):
    """Generate DaisyDog adaptation of a lesson"""
    pass
```

---

## ‚öñÔ∏è Phase 6: Copyright Compliance & Attribution (Ongoing)

### 6.1 Attribution System

```python
# Every lesson response includes proper attribution

class LessonWithAttribution(BaseModel):
    lesson: LessonResponse
    attribution: Attribution
    
class Attribution(BaseModel):
    source_name: str
    source_url: str
    copyright_notice: str
    usage_terms: str
    last_accessed: datetime
    
# Display prominently in UI:
# "This lesson plan is adapted from [Source Name](url)
# Used with educational fair use. Please visit the original source
# to support their ministry."
```

---

## üìä Implementation Checklist

**Before I Start Coding, Please Confirm:**

- [ ] **Legal Clearance**: Do you have permission to scrape/use these resources?
- [ ] **Replit Setup**: Do you have a Replit account with PostgreSQL addon?
- [ ] **API Keys**: Do you have Anthropic API key for DaisyDog adaptations?
- [ ] **Content Strategy**: Store full lessons or summaries + links?
- [ ] **Attribution Display**: How prominent should source attribution be?
- [ ] **Update Frequency**: How often should we re-scrape for updates?

**Week-by-Week Deliverables:**

- **Week 1**: Database schema deployed to Replit ‚úì
- **Week 2**: Scraping scripts functional, 50+ lessons scraped
- **Week 3**: DaisyDog AI adaptations working for 10 sample lessons
- **Week 4**: API endpoints live, frontend interface prototype
- **Week 5**: Full integration with DaisyDog chat interface

---

## üéØ Next Steps

**Immediate Actions Needed:**

1. **Search Existing Codebases**: Before building scrapers, let me search GitHub for:
   - Catholic education content scrapers
   - Lesson plan database schemas
   - Educational content APIs
   
2. **Clarify Your Needs**: Please answer the questions in the "Before I Start Coding" section

3. **Replit Configuration**: Share your Replit project URL so I can see the environment

**Once You Approve**, I'll:
1. Search for reusable codebases on GitHub
2. Set up the Replit database with schema
3. Build the scraping pipeline with proper attribution
4. Create DaisyDog AI adaptation service
5. Deploy FastAPI endpoints

Would you like me to start by searching GitHub for existing Catholic education scraping tools and lesson plan database projects we can build upon?